{
  "extends": [
    "github>AmpelProject/renovate-config",
    "github>AmpelProject/renovate-config//regexManagers/githubActionsVersions"
  ],
  "packageRules": [
    {
      "matchUpdateTypes": ["minor"],
      "matchDatasources": ["python-version"],
      "semanticCommitType": "fix",
      "groupName": "python"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update _VERSION variables in Dockerfiles",
      "fileMatch": ["(^|/|\\.)Dockerfile$", "(^|/)Dockerfile\\.[^/]*$"],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-z-]+?) depName=(?<depName>[^\\s]+?)(?: packageName=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?\\s(?:ENV|ARG) .+?_VERSION=(?<currentValue>.+?)\\s"
      ]
    },
    {
      "customType": "regex",
      "description": "Update Python version in Unit image",
      "fileMatch": ["(^|/)(workflow-templates|\\.(?:github|gitea|forgejo)/(?:workflows|actions))/.+\\.ya?ml$"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "image:\\s*(\\\"?)unit:([^-\\s]*)-python(?<currentValue>[^-\\\"\\s]+)"
      ],
      "datasourceTemplate": "python-version",
      "versioningTemplate": "python",
      "depNameTemplate": "python"
    }
  ]
}
